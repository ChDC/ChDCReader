# ChDCReader

## 简介

用于追小说、漫画的 App。

## 功能

* 从各大书源搜索小说、漫画
* 自动从各大书源获取最新章节
* 夜间模式

## 当前支持的书源

### 小说

* [起点中文网](http://www.qidian.com/)
* [创世中文网](http://chuangshi.qq.com/)
* [腾讯图书](http://ubook.qq.com)
* [SF轻小说](http://book.sfacg.com/)
* [大主宰小说网](http://www.daizhuzai.com/)
* [笔趣楼](http://www.biqulou.net/)
* [笔趣阁 TW](http://www.biquge.com.tw/)
* [笔趣阁中文网](http://www.biqugezw.com/)
* [笔趣阁](http://www.biquge.com/)
* [顶点小说](http://www.booktxt.net)

### 漫画

* [comico](http://www.comico.com.tw/)
* [腾讯动漫](http://ac.qq.com/)
* [布卡漫画](http://www.buka.cn)
* [有妖气](http://www.u17.com)
* [吹妖动漫](http://www.chuiyao.com/)
* [当鸟漫画](http://www.dangniao.com)
* [爱漫画网](http://www.2manhua.com/)
* [哦漫画](http://www.omanhua.com/comic/)

## 声明

本 App 创作的初衷是：**本人受不了看个小说漫画要在手机中装一堆 App，然后蹦一堆广告、弹出一堆垃圾消息，还有各种直播模块捆绑**。

但不可否认本 App 可能会对各大小说、漫画平台的商业活动造成一些小影响，所以**本 App 不会在各大应用商店上架**。也请各位朋友不要把本 App 发布到各大应用商店中。

**本 App 不得用于商业用途。否则，后果自负。**

本人享有本 App 的代码所有权，如果想使用本 App 的代码进行商业活动，请联系本人。

## 技术框架

* 本项目基于 Corodva 框架实现。

* 本项目中的爬虫部分使用的是本人创作的爬虫框架 [LittleCrawlerJS](https://github.com/ChDC/LittleCrawlerJS)

  它是基于配置的爬虫框架，只需要在配置文件中写好请求的链接和用于选取元素的 CSS 选择器就可以获取到想要的信息。

## 截图

### 书架页面

| 白天模式                                     | 夜间模式                                     |
| ---------------------------------------- | ---------------------------------------- |
| ![Screenshot_2017-05-01-12-02-11-780_com.chdc.reader](Screenshot/Screenshot_2017-05-01-12-02-11-780_com.chdc.reader.png) | ![Screenshot_2017-05-01-11-59-55-230_com.chdc.reader](Screenshot/Screenshot_2017-05-01-11-59-55-230_com.chdc.reader.png) |
| ![Screenshot_2017-05-01-12-03-27-366_com.chdc.reader](Screenshot/Screenshot_2017-05-01-12-03-27-366_com.chdc.reader.png) | ![Screenshot_2017-05-01-12-00-22-984_com.chdc.reader](Screenshot/Screenshot_2017-05-01-12-00-22-984_com.chdc.reader.png) |
| ![Screenshot_2017-05-01-12-00-28-594_com.chdc.reader](Screenshot/Screenshot_2017-05-01-21-36-46-076_com.chdc.reader.png) | ![Screenshot_2017-05-01-12-00-28-594_com.chdc.reader](Screenshot/Screenshot_2017-05-01-12-00-28-594_com.chdc.reader.png) |

### 详情页

| 白天模式                                     | 夜间模式                                     |
| ---------------------------------------- | ---------------------------------------- |
| ![Screenshot_2017-05-01-12-03-20-965_com.chdc.reader](Screenshot/Screenshot_2017-05-01-12-03-20-965_com.chdc.reader.png) | ![Screenshot_2017-05-01-12-03-20-965_com.chdc.reader](Screenshot/Screenshot_2017-05-01-21-39-04-874_com.chdc.reader.png) |

### 搜索页面

| 白天模式                                     | 夜间模式                                     |
| ---------------------------------------- | ---------------------------------------- |
| ![Screenshot_2017-05-01-12-03-17-077_com.chdc.reader](Screenshot/Screenshot_2017-05-01-12-03-17-077_com.chdc.reader.png) | ![Screenshot_2017-05-01-12-00-13-917_com.chdc.reader](Screenshot/Screenshot_2017-05-01-12-00-13-917_com.chdc.reader.png) |

### 小说阅读界面

| 白天模式                                     | 夜间模式                                     |
| ---------------------------------------- | ---------------------------------------- |
| ![Screenshot_2017-05-01-12-02-47-823_com.chdc.reader](Screenshot/Screenshot_2017-05-01-12-02-47-823_com.chdc.reader.png) | ![Screenshot_2017-05-01-12-01-28-577_com.chdc.reader](Screenshot/Screenshot_2017-05-01-12-01-28-577_com.chdc.reader.png) |
| ![Screenshot_2017-05-01-12-02-52-691_com.chdc.reader](Screenshot/Screenshot_2017-05-01-12-02-52-691_com.chdc.reader.png) | ![Screenshot_2017-05-01-20-46-37-751_com.chdc.reader](Screenshot/Screenshot_2017-05-01-20-46-37-751_com.chdc.reader.png) |
| ![Screenshot_2017-05-01-12-03-02-646_com.chdc.reader](Screenshot/Screenshot_2017-05-01-12-03-02-646_com.chdc.reader.png) | ![Screenshot_2017-05-01-20-47-02-873_com.chdc.reader](Screenshot/Screenshot_2017-05-01-20-47-02-873_com.chdc.reader.png) |
| ![Screenshot_2017-05-01-12-02-56-677_com.chdc.reader](Screenshot/Screenshot_2017-05-01-12-02-56-677_com.chdc.reader.png) | ![Screenshot_2017-05-01-20-46-49-562_com.chdc.reader](Screenshot/Screenshot_2017-05-01-20-46-49-562_com.chdc.reader.png) |
| ![Screenshot_2017-05-07-13-19-01-527_com.chdc.reader](Screenshot/Screenshot_2017-05-07-13-19-01-527_com.chdc.reader.png) | ![Screenshot_2017-05-07-13-19-01-527_com.chdc.reader](Screenshot/Screenshot_2017-05-07-13-12-41-997_com.chdc.reader.png) |

### 漫画阅读页面

| 白天模式                                     | 夜间模式                                     |
| ---------------------------------------- | ---------------------------------------- |
| ![Screenshot_2017-05-01-12-02-18-613_com.chdc.reader](Screenshot/Screenshot_2017-05-01-12-02-18-613_com.chdc.reader.png) | ![Screenshot_2017-05-01-12-02-26-613_com.chdc.reader](Screenshot/Screenshot_2017-05-01-12-02-26-613_com.chdc.reader.png) |

### 发现页面

| 白天模式                                     | 夜间模式                                     |
| ---------------------------------------- | ---------------------------------------- |
| ![Screenshot_2017-05-01-20-46-09-432_com.chdc.reader](Screenshot/Screenshot_2017-05-01-12-03-09-025_com.chdc.reader.png) | ![Screenshot_2017-05-01-20-46-09-432_com.chdc.reader](Screenshot/Screenshot_2017-05-01-20-46-09-432_com.chdc.reader.png) |

## 使用技巧

* 在搜索页面，点击搜索结果的标题可以跳转到本书的官方网站
* 在阅读页面的目录页点击目录源的名字可以跳转到本书的官方网站
* 拖动书架中书籍标题可以对书籍进行排序
* 当章节的质量不好时，点击“劣质章节”可以从其他书源加载该章节
* 养肥模式和追更模式
  * 养肥模式：如果有更新会显示在书架首部，但是如果当时未看，下次会自动移动到书架尾部
  * 追更模式：如果有更新会显示在书架首部，但是如果当时未看，下次会还是会出现在书架首部

## 捐赠

| 微信捐赠                             | 支付宝捐赠                            |
| -------------------------------- | -------------------------------- |
| ![wechat](Screenshot/wechat.png) | ![alipay](Screenshot/alipay.png) |

感谢您的捐赠！

## 开发相关

### 项目中用到的插件

* cordova-hot-code-push-plugin
* cordova-plugin-file
* cordova-plugin-http
* cordova-plugin-inappbrowser
* cordova-plugin-statusbar

### 修改过的插件

* cordova-plugin-inappbrowser

  `InAppBrowser.java`  786 行：

  ```java
                  // String overrideUserAgent = preferences.getString("OverrideUserAgent", null);
                  String appendUserAgent = preferences.getString("AppendUserAgent", null);

                  //if (overrideUserAgent != null) {
                  //    settings.setUserAgentString(overrideUserAgent);
                  //}
                  if (appendUserAgent != null) {
                      settings.setUserAgentString(settings.getUserAgentString() + appendUserAgent);
                  }
  ```


###  TODO

* ~~缓存封面~~
* translate 模块的内存优化
* ~~首次启动强制更新资源~~
* 清除看过的章节缓存
* 页面输出log, error
* 非 VIP 章节只从目录源加载，或者目录源多重试几次
* 因为漫画图片众多，有的漫画源有多个图片服务器，本App需要支持


### BUG

* ​漫画章节匹配问题：由于漫画的特殊性，漫画的目录在各个源中是有很大不同的，导致匹配有很大的问题
* 偶尔，有更新章节的时候第一次点进去阅读不加载更新，必须第二次点击进入才能加载更新


